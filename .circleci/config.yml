version: 2.1
orbs:
    katalon-studio: katalon/katalon-studio@23.0.8

workflows:
  build:
    jobs:
        docker:
          - image: buildpack-deps:trusty
        steps:
          - checkout
          - run:
              name: Deploy Master to Heroku
              command: |
                git push --force https://heroku:c3631a7f-fa25-43d5-9489-69e66286c978@git.heroku.com/webinar-demo-kat-staging.git master
  test:
    jobs:
        - katalonstudio/katjob:
                version: "latest"
                katalon_param: '-browserType="Chrome" -retry=1 -statusDelay=15 -testSuitePath="Test Suites/TS_RegressionTest"'
                
  deploy:
    jobs:
        docker:
          - image: buildpack-deps:trusty

        steps:
          - checkout
          - run:
              name: Deploy Master to Heroku
              command: |
                git push --force https://heroku:c3631a7f-fa25-43d5-9489-69e66286c978@git.heroku.com/webinar-demo-kat-production.git master
